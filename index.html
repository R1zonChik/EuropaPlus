<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ï–≤—Ä–æ–ø–∞ –ü–ª—é—Å - –°—É–ø–µ—Ä –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –û–Ω–ª–∞–π–Ω –†–∞–¥–∏–æ –ü–ª–µ–µ—Ä</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(45deg, #1a1a3a, #2a2a4a);
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
        }
        .player-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }
        .control-btn {
            background: #e94560;
            border: none;
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin: 5px;
        }
        .control-btn:hover {
            background: #d63551;
        }
        .slider-container {
            margin: 20px 0;
            display: flex;
            align-items: center;
        }
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 5px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        .slider:hover {
            opacity: 1;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #e94560;
            cursor: pointer;
        }
        .slider::-moz-range-thumb {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #e94560;
            cursor: pointer;
        }
        .info-container {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            margin-top: 20px;
        }
        .additional-controls {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        #nowPlaying {
            text-align: center;
            margin-top: 20px;
            font-style: italic;
        }
        #volumeDisplay {
            text-align: center;
            margin-top: 5px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <h1>–ï–≤—Ä–æ–ø–∞ –ü–ª—é—Å - –û–Ω–ª–∞–π–Ω –†–∞–¥–∏–æ</h1>
        <audio id="audioPlayer" src="https://ep256.hostingradio.ru:8052/europaplus256.mp3"></audio>
        <div style="text-align: center;">
            <button id="playPauseBtn" class="control-btn">‚ñ∂</button>
            <button id="rewindBtn" class="control-btn">‚è™10—Å</button>
            <button id="forwardBtn" class="control-btn">10—Å‚è©</button>
            <button id="liveBtn" class="control-btn">üî¥ –ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä</button>
        </div>
        <div class="slider-container">
            <span>üîà</span>
            <input type="range" id="volumeSlider" class="slider" min="0" max="1" step="0.01" value="1">
            <span>üîä</span>
        </div>
        <div id="volumeDisplay">–ì—Ä–æ–º–∫–æ—Å—Ç—å: 100%</div>
        <div class="info-container">
            <div id="listeningTime">–í—Ä–µ–º—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è: 00:00:00</div>
            <div id="moscowTime">–ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è: --:--:--</div>
        </div>
        <div class="additional-controls">
            <button id="favoriteBtn" class="control-btn">‚ù§ –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
            <button id="shareBtn" class="control-btn">üîó –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            <button id="recordBtn" class="control-btn">üéô –ó–∞–ø–∏—Å—å</button>
            <button id="nightModeBtn" class="control-btn">üåô –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º</button>
        </div>
        <div id="nowPlaying">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–∫–µ...</div>
    </div>

    <script>
        const audioPlayer = document.getElementById('audioPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const rewindBtn = document.getElementById('rewindBtn');
        const forwardBtn = document.getElementById('forwardBtn');
        const liveBtn = document.getElementById('liveBtn');
        const listeningTimeDisplay = document.getElementById('listeningTime');
        const moscowTimeDisplay = document.getElementById('moscowTime');
        const favoriteBtn = document.getElementById('favoriteBtn');
        const shareBtn = document.getElementById('shareBtn');
        const recordBtn = document.getElementById('recordBtn');
        const nightModeBtn = document.getElementById('nightModeBtn');
        const nowPlayingDisplay = document.getElementById('nowPlaying');
        const volumeDisplay = document.getElementById('volumeDisplay');

        let startTime;
        let listeningInterval;
        let isRecording = false;
        let isNightMode = false;

        playPauseBtn.addEventListener('click', togglePlayPause);
        volumeSlider.addEventListener('input', adjustVolume);
        rewindBtn.addEventListener('click', () => seekAudio(-10));
        forwardBtn.addEventListener('click', () => seekAudio(10));
        liveBtn.addEventListener('click', returnToLive);
        favoriteBtn.addEventListener('click', addToFavorites);
        shareBtn.addEventListener('click', shareStation);
        recordBtn.addEventListener('click', toggleRecording);
        nightModeBtn.addEventListener('click', toggleNightMode);

        function togglePlayPause() {
            if (audioPlayer.paused) {
                audioPlayer.play().catch(e => console.error("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:", e));
                playPauseBtn.textContent = '‚è∏';
                startListeningTime();
            } else {
                audioPlayer.pause();
                playPauseBtn.textContent = '‚ñ∂';
                clearInterval(listeningInterval);
            }
        }

        function adjustVolume(e) {
            const volume = parseFloat(e.target.value);
            audioPlayer.volume = volume;
            const volumePercentage = Math.round(volume * 100);
            volumeDisplay.textContent = `–ì—Ä–æ–º–∫–æ—Å—Ç—å: ${volumePercentage}%`;
        }

        function seekAudio(seconds) {
            audioPlayer.currentTime += seconds;
        }

        function returnToLive() {
            audioPlayer.src = audioPlayer.src;
            audioPlayer.play().catch(e => console.error("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:", e));
            playPauseBtn.textContent = '‚è∏';
            startListeningTime();
        }

        function startListeningTime() {
            startTime = new Date();
            updateListeningTime();
            listeningInterval = setInterval(updateListeningTime, 1000);
        }

        function updateListeningTime() {
            const now = new Date();
            const diff = now - startTime;
            const hours = Math.floor(diff / 3600000);
            const minutes = Math.floor((diff % 3600000) / 60000);
            const seconds = Math.floor((diff % 60000) / 1000);
            listeningTimeDisplay.textContent = `–í—Ä–µ–º—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è: ${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function updateMoscowTime() {
            const now = new Date();
            const moscowTime = new Date(now.toLocaleString("en-US", {timeZone: "Europe/Moscow"}));
            moscowTimeDisplay.textContent = `–ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è: ${moscowTime.toLocaleTimeString('ru-RU')}`;
        }

        setInterval(updateMoscowTime, 1000);

        function addToFavorites() {
            alert('–†–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!');
        }

        function shareStation() {
            alert('–°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏—é —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
        }

        function toggleRecording() {
            isRecording = !isRecording;
            if (isRecording) {
                recordBtn.textContent = '‚èπ –°—Ç–æ–ø';
                alert('–ó–∞–ø–∏—Å—å –Ω–∞—á–∞—Ç–∞');
            } else {
                recordBtn.textContent = 'üéô –ó–∞–ø–∏—Å—å';
                alert('–ó–∞–ø–∏—Å—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
            }
        }

        function toggleNightMode() {
            isNightMode = !isNightMode;
            document.body.style.filter = isNightMode ? 'invert(1) hue-rotate(180deg)' : 'none';
            nightModeBtn.textContent = isNightMode ? '‚òÄ –î–Ω–µ–≤–Ω–æ–π —Ä–µ–∂–∏–º' : 'üåô –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º';
        }

        function updateNowPlaying() {
            fetch('https://europaplus.ru/api/v1/track/info?media_id=1')
                .then(response => response.json())
                .then(data => {
                    const track = data.track;
                    if (track && track.artist && track.title) {
                        nowPlayingDisplay.textContent = `–°–µ–π—á–∞—Å –∏–≥—Ä–∞–µ—Ç: ${track.artist} - ${track.title}`;
                    } else {
                        nowPlayingDisplay.textContent = '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–µ–∫–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
                    }
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–∫–µ:', error);
                    nowPlayingDisplay.textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–µ–∫–µ';
                });
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–µ–∫–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        setInterval(updateNowPlaying, 30000);
        // –í—ã–∑—ã–≤–∞–µ–º —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        updateNowPlaying();

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateMoscowTime();
    </script>
</body>
</html>
